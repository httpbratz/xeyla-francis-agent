# Francis - Development environment values
# Usage (local helm): helm upgrade --install francis-dev . -f values-francis-dev.yaml

global:
  namespace: francis-dev
  appName: francis-dev
  fullnameOverride: "francis-dev"

image:
  repository: tgchatbot
  tag: latest
  pullPolicy: IfNotPresent

namespace:
  create: true
  name: francis-dev

config:
  environment: "dev"
  debug: "true"
  logLevel: "DEBUG"
  instanceId: "francis-dev"
  appName: "Francis"
  agentName: "francis"
  configSource: "infra_api"
  infraApiBaseUrl: "https://api.simpme.fr"
  # Required for KEDA Redis triggers (host:port, no password)
  redisAddress: "redis-19585.c276.us-east-1-2.ec2.cloud.redislabs.com:19585"
  databasePoolSize: "5"
  databasePoolOverflow: "10"

api:
  replicas: 1
  service:
    type: LoadBalancer
    port: 8000

workers:
  telegram:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  write:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
  analyze:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  persistence:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 1
  workflow:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  vault:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  avatar:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  conversationSummary:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
  paymentWebhook:
    keda:
      enabled: true
      minReplicas: 1
      maxReplicas: 1
  deliveryRetry:
    keda:
      enabled: true
      minReplicas: 0
      maxReplicas: 1

# AWS Secrets Manager / SSM via External Secrets Operator (recommended even for dev with ArgoCD)
externalSecrets:
  enabled: true
  secretStoreRef:
    kind: ClusterSecretStore
    name: aws-secretsmanager
  aws:
    appSecretKey: "dev/francis/app"
    redisAuthKey: "dev/francis/redis"

migrations:
  enabled: false

monitoring:
  enabled: false